import base64
code="CmltcG9ydCBweW1vbmdvCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKaW1wb3J0IHN5cwppbXBvcnQgZ2V0b3B0CmltcG9ydCBwcHJpbnQKCiMgQ29weXJpZ2h0IDIwMTIKIyAxMGdlbiwgSW5jLgojIEF1dGhvcjogQW5kcmV3IEVybGljaHNvbiAgIGFqZUAxMGdlbi5jb20KIwojIElmIHlvdSBhcmUgYSBzdHVkZW50IGFuZCByZWFkaW5nIHRoaXMgY29kZSwgdHVybiBiYWNrIG5vdywgYmVmb3JlCiMgdGhlIE1vbmdvREIgZ29kcyBzbWl0ZSB5b3UuCgpjb25uZWN0aW9uID0gTm9uZQpkYiA9IE5vbmUKd2ViaG9zdCA9ICJsb2NhbGhvc3Q6ODA4MiIKbW9uZ29zdHIgPSAibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNyIKZGJfbmFtZSA9ICJibG9nIgoKIyB0aGlzIHNjcmlwdCB3aWxsIGNoZWNrIHRoYXQgaG9tZXdvcmsgNC4zCgojIGNvbW1hbmQgbGluZSBhcmcgcGFyc2luZyB0byBtYWtlIGZvbGtzIGhhcHB5IHdobyB3YW50IHRvIHJ1biBhdCBtb25nb2xhYnMgb3IgbW9uZ29ocQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuCmRlZiBhcmdfcGFyc2luZyhhcmd2KToKCiAgICBnbG9iYWwgd2ViaG9zdAogICAgZ2xvYmFsIG1vbmdvc3RyCiAgICBnbG9iYWwgZGJfbmFtZQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2LCAiLXA6LW06LWQ6IikKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6CiAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIKICAgICAgICBwcmludCAiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikKICAgICAgICBwcmludCAiXHRkYXRhYmFzZU5hbWUgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQoZGJfbmFtZSkKICAgICAgICBzeXMuZXhpdCgyKQogICAgZm9yIG9wdCwgYXJnIGluIG9wdHM6CiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToKICAgICAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiCiAgICAgICAgICAgIHN5cy5leGl0KDIpCiAgICAgICAgZWxpZiBvcHQgaW4gKCItbSIpOgogICAgICAgICAgICBtb25nb3N0ciA9IGFyZwogICAgICAgICAgICBwcmludCAiT3ZlcnJpZGluZyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGJlICIsIG1vbmdvc3RyCiAgICAgICAgZWxpZiBvcHQgaW4gKCItZCIpOgogICAgICAgICAgICBkYl9uYW1lID0gYXJnCiAgICAgICAgICAgIHByaW50ICJPdmVycmlkaW5nIE1vbmdvREIgZGF0YWJhc2UgdG8gYmUgIiwgZGJfbmFtZQoKIyBjaGVjayB0byBzZWUgaWYgdGhleSBsb2FkZWQgdGhlIGRhdGEgc2V0CmRlZiBjaGVja19mb3JfZGF0YV9pbnRlZ3JpdHkoKToKCiAgICBwb3N0cyA9IGRiLnBvc3RzCiAgICB0cnk6CiAgICAgICAgY291bnQgPSBwb3N0cy5jb3VudCgpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGNvdW50ICE9IDEwMDApOgogICAgICAgIHByaW50ICJUaGVyZSBhcmUgc3VwcG9zZWQgdG8gYmUgMTAwMCBkb2N1bWVudHMuIHlvdSBoYXZlICIsIGNvdW50CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBmaW5kIHRoZSBtb3N0IHBvcHVsYXIgdGFncwogICAgdHJ5OgoKICAgICAgICByZXN1bHQgPSBkYi5wb3N0cy5hZ2dyZWdhdGUoW3snJHByb2plY3QnOnsndGFncyc6MX19LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnJHVud2luZCc6JyR0YWdzJ30sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckZ3JvdXAnOnsnX2lkJzogJyR0YWdzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50Jzp7JyRzdW0nOjF9fX0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckc29ydCc6eydjb3VudCc6LTF9fSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyRsaW1pdCc6MTB9XSkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCgogICAgaWYgKHJlc3VsdFsncmVzdWx0J11bMF1bJ2NvdW50J10gIT0gMTMgb3IKICAgICAgICByZXN1bHRbJ3Jlc3VsdCddWzBdWydfaWQnXSAhPSAic3BoeW54Iik6CiAgICAgICAgcHJpbnQgIlRoZSBkYXRhc2V0IGlzIG5vdCBwcm9wZXJseSBsb2FkZWQuIFRoZSBkaXN0cmlidXRpb24gb2YgcG9zdCB0YWdzIGlzIHdyb25nLiIKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBwcmludCAiRGF0YSBsb29rcyBsaWtlIGl0IGlzIHByb3Blcmx5IGxvYWRlZCBpbnRvIHRoZSBwb3N0cyBjb2xsZWN0aW9uIgoKICAgIHJldHVybiBUcnVlCiAgICAKCmRlZiBjaGVja19mb3JfZmFzdF9ibG9nX2hvbWVfcGFnZSgpOgoKICAgIHBvc3RzID0gZGIucG9zdHMKCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoKS5zb3J0KCdkYXRlJywgZGlyZWN0aW9uPS0xKS5saW1pdCgxMCkuZXhwbGFpbigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGV4cGxhaW5bJ25zY2FubmVkT2JqZWN0cyddID4gMTApOgogICAgICAgIHByaW50ICJTb3JyeSwgZXhlY3V0aW5nIHRoZSBxdWVyeSB0byBkaXNwbGF5IHRoZSBob21lIHBhZ2UgaXMgdG9vIHNsb3cuICIKICAgICAgICBwcmludCAiV2Ugc2hvdWxkIGJlIHNjYW5uaW5nIG5vIG1vcmUgdGhhbiAxMCBkb2N1bWVudHMuIFlvdSBzY2FubmVkIiwgZXhwbGFpblsnbnNjYW5uZWRPYmplY3RzJ10KICAgICAgICBwcmludCAiaGVyZSBpcyB0aGUgb3V0cHV0IGZyb20gZXhwbGFpbiIKCiAgICAgICAgcHAgPSBwcHJpbnQuUHJldHR5UHJpbnRlcihkZXB0aD02KQogICAgICAgIHBwLnBwcmludChleHBsYWluKQogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICBwcmludCAiSG9tZSBwYWdlIGlzIHN1cGVyIGZhc3QuIE5pY2Ugam9iLlxuIgogICAgcmV0dXJuIFRydWUKCmRlZiBnZXRfdGhlX21pZGRsZV9wZXJtYWxpbmsoKToKICAgIHBvc3RzID0gZGIucG9zdHMKICAgIHRyeToKICAgICAgICBjID0gcG9zdHMuZmluZCgpLnNraXAoNTAwKS5saW1pdCgxKQogICAgICAgIGZvciBkb2MgaW4gYzoKICAgICAgICAgICAgcGVybWFsaW5rID0gZG9jWydwZXJtYWxpbmsnXQogICAgICAgICAgICByZXR1cm4gcGVybWFsaW5rCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICByZXR1cm4gIiIKCmRlZiBjaGVja19mb3JfZmFzdF9ibG9nX2VudHJ5X3BhZ2UoKToKICAgIAogICAgcG9zdHMgPSBkYi5wb3N0cwoKICAgIHBlcm1hbGluayA9IGdldF90aGVfbWlkZGxlX3Blcm1hbGluaygpCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoeydwZXJtYWxpbmsnOnBlcm1hbGlua30pLmV4cGxhaW4oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIChleHBsYWluWyduc2Nhbm5lZE9iamVjdHMnXSA+IDEpOgogICAgICAgIHByaW50ICJTb3JyeSwgZXhlY3V0aW5nIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhIHBvc3QgYnkgcGVybWFsaW5rIGlzIHRvbyBzbG93ICIKICAgICAgICBwcmludCAiV2Ugc2hvdWxkIGJlIHNjYW5uaW5nIG5vIG1vcmUgdGhhbiAxIGRvY3VtZW50cy4gWW91IHNjYW5uZWQiLCBleHBsYWluWyduc2Nhbm5lZE9iamVjdHMnXQogICAgICAgIHByaW50ICJoZXJlIGlzIHRoZSBvdXRwdXQgZnJvbSBleHBsYWluIgoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50ICJCbG9nIHJldHJpZXZhbCBieSBwZXJtYWxpbmsgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBjaGVja19mb3JfZmFzdF9wb3N0c19ieV90YWdfcGFnZSgpOgogICAgcG9zdHMgPSBkYi5wb3N0cwoKICAgIHRhZyA9ICJzcGh5bngiCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoeyd0YWdzJzp0YWd9KS5zb3J0KCdkYXRlJywgZGlyZWN0aW9uPS0xKS5saW1pdCgxMCkuZXhwbGFpbigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGV4cGxhaW5bJ25zY2FubmVkT2JqZWN0cyddID4gMTApOgogICAgICAgIHByaW50ICJTb3JyeSwgZXhlY3V0aW5nIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBwb3N0cyBieSB0YWcgaXMgdG9vIHNsb3cuIgogICAgICAgIHByaW50ICJXZSBzaG91bGQgYmUgc2Nhbm5pbmcgbm8gbW9yZSB0aGFuIDEwIGRvY3VtZW50cy4gWW91IHNjYW5uZWQiLCBleHBsYWluWyduc2Nhbm5lZE9iamVjdHMnXQogICAgICAgIHByaW50ICJoZXJlIGlzIHRoZSBvdXRwdXQgZnJvbSBleHBsYWluIgoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50ICJCbG9nIHJldHJpZXZhbCBieSB0YWcgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iCiAgICByZXR1cm4gVHJ1ZQoKCiMgbWFpbiBzZWN0aW9uIG9mIHRoZSBjb2RlCmRlZiBtYWluKGFyZ3YpOgogICAgICAgICAgICAKICAgIGFyZ19wYXJzaW5nKGFyZ3YpCiAgICBnbG9iYWwgY29ubmVjdGlvbgogICAgZ2xvYmFsIGRiCgogICAgcHJpbnQgIldlbGNvbWUgdG8gdGhlIEhXIDQuMyBDaGVja2VyLiBNeSBqb2IgaXMgdG8gbWFrZSBzdXJlIHlvdSBhZGRlZCB0aGUgaW5kZXhlcyIKICAgIHByaW50ICJ0aGF0IG1ha2UgdGhlIGJsb2cgZmFzdCBpbiB0aGUgZm9sbG93aW5nIHRocmVlIHNpdHVhdGlvbnMiCiAgICBwcmludCAiXHRXaGVuIHNob3dpbmcgdGhlIGhvbWUgcGFnZSIKICAgIHByaW50ICJcdFdoZW4gZmV0Y2hpbmcgYSBwYXJ0aWN1bGFyIHBvc3QiCiAgICBwcmludCAiXHRXaGVuIHNob3dpbmcgYWxsIHBvc3RzIGZvciBhIHBhcnRpY3VsYXIgdGFnIgoKICAgICMgY29ubmVjdCB0byB0aGUgZGIgKG1vbmdvc3RyIHdhcyBzZXQgaW4gYXJnX3BhcnNpbmcpCiAgICB0cnk6CiAgICAgICAgY29ubmVjdGlvbiA9IHB5bW9uZ28uQ29ubmVjdGlvbihtb25nb3N0ciwgc2FmZT1UcnVlKQogICAgICAgIGRiID0gY29ubmVjdGlvbltkYl9uYW1lXQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJjYW4ndCBjb25uZWN0IHRvIE1vbmdvREIgdXNpbmciLCBtb25nb3N0ciwgIi4gSXMgaXQgcnVubmluZz8iCiAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICAKICAgIGlmIChub3QgY2hlY2tfZm9yX2RhdGFfaW50ZWdyaXR5KCkpOgogICAgICAgIHByaW50ICJTb3JyeSwgdGhlIGRhdGEgc2V0IGlzIG5vdCBsb2FkZWQgY29ycmVjdGx5IGluIHRoZSBwb3N0cyBjb2xsZWN0aW9uIgogICAgICAgIHN5cy5leGl0KDEpCgogICAgaWYgKG5vdCBjaGVja19mb3JfZmFzdF9ibG9nX2hvbWVfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byBkaXNwbGF5IHRoZSBibG9nIGhvbWUgcGFnZSBpcyB0b28gc2xvdy4iCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X2Jsb2dfZW50cnlfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhIGJsb2cgcG9zdCBieSBwZXJtYWxpbmsgaXMgdG9vIHNsb3cuIgogICAgICAgIHN5cy5leGl0KDEpCgogICAgaWYgKG5vdCBjaGVja19mb3JfZmFzdF9wb3N0c19ieV90YWdfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhbGwgcG9zdHMgd2l0aCBhIGNlcnRhaW4gdGFnIGlzIHRvbyBzbG93IgogICAgICAgIHN5cy5leGl0KDEpCiAgICAKICAgICMgaWYgeW91IGFyZSByZWFkaW5nIHRoaXMgaW4gY2xlYXJ0ZXh0LCB5b3UgYXJlIHZpb2xhdGluZyB0aGUgaG9ub3IgY29kZS4KICAgICMgWW91IGNhbiBzdGlsbCByZWRlZW0geW91cnNlbGYuIEdldCBpdCB3b3JraW5nIGFuZCBkb24ndCBzdWJtaXQgdGhlIHZhbGlkYXRpb24gY29kZSB1bnRpbCB5b3UgZG8uCiAgICAjIEFsbCBhIG1hbiBoYXMgYXQgdGhlIGVuZCBvZiB0aGUgZGF5IGlzIGhpcyB3b3JkLgogICAgcHJpbnQgIlRlc3RzIFBhc3NlZCBmb3IgSFcgNC4zLiBZb3VyIEhXIDQuMyB2YWxpZGF0aW9uIGNvZGUgaXMgODkzamZuczI5ZjcyOGZuMjlmMjBmMiIKCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oc3lzLmFyZ3ZbMTpdKQoKCgoKCgoK"
eval(compile(base64.b64decode(code), "<string>", 'exec'))
